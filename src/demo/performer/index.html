<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>ParaPerformer Demo -- ParaCharts</title>
	<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22green%22/><text y=%22.9em%22 font-size=%2290%22>ðŸ“ˆ</text></svg>">
	<style>
		:root {
			--paracharts-theme-color: hsl(194, 28%, 45%);
    		--paracharts-theme-color-light: hsl(194, 28%, 85%);
		}
		main {
			display: grid;
			grid-template-columns: 1fr 1fr;
			column-gap: 1rem;
		}
		#chart {
			--para-stroke-width: 20;
			width: 600px;
		}
		body {
			font-family: 'Helvetica Neue', Arial, sans-serif;
			color: #333;
			font-weight: 300;
		}
		h1 {
			position: fixed;
			bottom: 0;
			right: 0;
			margin: 1rem;
			font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
			font-style: italic;
			font-weight: normal;
			color: hsl(0, 0%, 40%);
		}
		#text {
			background: lightskyblue;
			font-size: 20pt;
			padding: 1rem;
			margin: 20rem 0;
		}
	</style>
</head>
<body>
  	<script type="module" src="/dist-ai/paracharts.js"></script>
	<script type="module">
    	const chart = document.getElementById('chart');
		const text = document.getElementById('text');
		let demoDidStart = false;
        function runDemo() {
            const steps = [
                () => {
					text.innerHTML = 'Move right';
                    chart.api.doAction('move', {direction: 'right'});
                },
                () => {
					text.innerHTML = 'Move right again';
                    chart.api.doAction('move', {direction: 'right'});
                },
                () => {
					text.innerHTML = 'Enable dark mode';
                    chart.api.setSetting('color.isDarkModeEnabled', true);
                },
                () => {
					text.innerHTML = 'Disable dark mode';
                    chart.api.setSetting('color.isDarkModeEnabled', false);
                },
                () => {
					text.innerHTML = 'Disable direct labels';
                    chart.api.setSetting('chart.hasDirectLabels', false);
                },
                () => {
					text.innerHTML = 'Enable direct labels';
                    chart.api.setSetting('chart.hasDirectLabels', true);
                },
                () => {
					text.innerHTML = 'Visit point';
                    chart.api.getSeries('EU').getPoint(6).visit();
                },
                () => {
					text.innerHTML = 'Select point';
                    chart.api.getSeries('EU').getPoint(6).select();
                },
                () => {
					text.innerHTML = 'Deselect point';
                    chart.api.getSeries('EU').getPoint(6).select();
                },
                () => {
					text.innerHTML = 'Play point sonification';
                    chart.api.getSeries('EU').getPoint(6).play();
                },
                () => {
					text.innerHTML = 'Annotate point';
                    chart.api.getSeries('EU').getPoint(6).annotate('Foobar');
                },
                () => {
					text.innerHTML = 'Lowlight Euro area';
                    chart.api.getSeries('EU').lowlightOthers();
                },
                () => {
					text.innerHTML = 'Clear all lowlights';
                    chart.api.clearAllSeriesLowlights();
                },
                () => {
					text.innerHTML = 'Hide all series';
                    chart.api.hideAllSeries();
                },
                () => {
					text.innerHTML = 'Unhide EU';
                    chart.api.getSeries('EU').unhide();
                },
                () => {
					text.innerHTML = 'Unhide Euro area';
                    chart.api.getSeries('Euro area').unhide();
                },
                () => {
					text.innerHTML = 'Play series riff';
                    chart.api.getSeries('Euro area').playRiff();
                },
            ];
            steps.forEach((step, i) => {
                setTimeout(step, (i + 1)*2000);
            })
        }
		chart.addEventListener('paranotice', (e) => {
			console.log('NOTICE', e.detail);
			if (e.detail.key === 'animRevealEnd' && !demoDidStart) {
                runDemo();
				demoDidStart = true;
			}
		});
		//await chart.loaded;
		//console.log('CHART HAS LOADED');
	</script>
	<h1>@fizz/paracharts ParaPerformer Demo</h1>
  	<main>
    	<section id="content-container">
			<para-chart
				id="chart"
				manifest="/src/demo-data/line-multi-manifest-128.json"
			></para-chart>
		</section>
		<section id="text"
		>
			(Wait ...)
		</section>
  	</main>
</body>
</html>